---
session_name: indico
windows:
  - window_name: venv
    focus: true
    start_directory: $INDICODEV/indico
    panes:
      - shell_command: pipenv shell

  - window_name: repos
    layout: tiled
    start_directory: $INDICODEV
    panes:
      - focus: true
        shell_command: cd indico && git status
      - shell_command: cd indico-un && git status
      - shell_command: cd indico-plugins && git status

  - window_name: local
    layout: main-horizontal
    start_directory: $INDICODEV/indico
    panes:
      - focus: true
        shell_command: pipenv run -- indico shell
      - shell_command: pipenv run -- indico run -h 127.0.0.1 -q --enable-evalex
      - shell_command: pipenv run -- ./bin/maintenance/build-assets.py indico --dev --watch
      - shell_command: pipenv run -- ./bin/maintenance/build-assets.py plugin --dev --watch $INDICODEV/indico-un

  - window_name: local-logs
    layout: main-horizontal
    start_directory: $INDICODEV/indico
    panes:
      - shell_command: pipenv run -- python ./bin/utils/db_log.py -S
      - shell_command: tail -f $INDICOAPP/data/log/indico.log