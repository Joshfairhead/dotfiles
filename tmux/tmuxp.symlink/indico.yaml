---
session_name: indico
shell_command_before: ktstart; workon indico
windows:
  - window_index: 0
    panes:
      - pwd

  - window_name: local
    focus: true
    layout: '6880,318x80,0,0[318x15,0,0,2,318x64,0,16{159x64,0,16,4,158x64,160,16,6}]'
    panes:
      - focus: true
        shell_command: ndc-init; ndc
      - git st
      - indico shell -q

  - window_name: logs
    layout: even-horizontal
    panes:
      - ndc-dblog -S
      - tail -f $VIRTUAL_ENV/log/indico.log | grep -v flask-session

  - window_name: prod
    layout: tiled
    panes:
      - ssh indico-wk1
      - ssh indico-wk2
      - ssh indico-wk3
      - ssh indico-scheduler

  - window_name: dev
    layout: even-horizontal
    panes:
      - ssh indico-dev1
      - ssh indico-dev2

  - window_name: lbs
    layout: even-horizontal
    panes:
      - ssh indico-lb1
      - ssh indico-lb2
